<!DOCTYPE html>
<html>

<head>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>UEF Room Finder</title>

</head>

<body>

    Valitse kampus // Choose campus<br>

    <form>
        
        Kampus:<br>
        <input type="checkbox" id="kampus1" name="kampus1" value="Joensuu" checked="checked">
        <label for="kampus1">Joensuu</label><br>
        <input type="checkbox" id="kampus2" name="kampus2" value="Kuopio" checked="checked">
        <label for="kampus2">Kuopio</label>
        <br><br>
        <input type="checkbox" id="vc" name="vc" value="vc">
        <label for="vc">Videoneuvottelulaite (voi liittyä UEF:n MS Teams kokouksiin)<br>
            Video conferencing device (can join UEF MS Teams meetings)
        </label>
        <br><br>

        Vähimmäisvaatimus henkilökapasiteetille<br>
        Minimum capacity for people (persons):
        <div class="slidercontainer">
            <input type="range" min="2" max="600" value="25" class="slider" id="liuku_min">
            <br><input id="luku_min" name="luku_min" type="number" value=""><br><br>
        </div>

        Rajaa liian isot tilat<br>
        Filter too big rooms:
        <div class="slidercontainer2">
            <input type="range" min="10" max="600" value="600" class="slider" id="liuku_max">
            <br><input id="luku_max" name="luku_max" type="number" value=""><br><br>
        </div>

        <button type="button" onclick="listaa()">listaa tilat</button> <br><br><br>
        
        

    </form>



    
<script>

    // muuttujat liukurille ja lukukentälle
    var liukuri_min = document.getElementById("liuku_min");
    var liukuri_max = document.getElementById("liuku_max");
    var luku_min = document.getElementById("luku_min");
    var luku_max = document.getElementById("luku_max");

    luku_min.value = liukuri_min.value;
    luku_max.value = liukuri_max.value;

    liukuri_min.oninput = function(){ 
        luku_min.value = this.value;
     }
    luku_min.oninput = function(){
        liukuri_min.value = this.value;
    }

    liukuri_max.oninput = function(){ 
        luku_max.value = this.value;
     }
    luku_max.oninput = function(){
        liukuri_max.value = this.value;
    }

    function listaa(){

        //tyhjennä ensin vanhat pois
        document.getElementById("taulukko").innerHTML="";
        
        // teksti, johon tuloksia lisätään
        var testausta = "";

        // kampus luuppi
        for(let kampus in tilat){

            //tila luuppi
            for (let tila in tilat[kampus]){

                if (document.getElementById('kampus1').checked
                && tilat[kampus][tila].kapasiteetti >= luku_min.value
                && tilat[kampus][tila].kapasiteetti <= luku_max.value)
                {
                    if (kampus == "Joensuu" && document.getElementById('vc').checked == 
                    tilat[kampus][tila].videoneuvottelulaite){
                        testausta += kampus +"   " 
                        + tilat[kampus][tila].tunnus+"   " 
                        + tilat[kampus][tila].kapasiteetti +"   "
                        if (tilat[kampus][tila].ohje != undefined){testausta += "<a href=\"" + tilat[kampus][tila].ohje + "\">ohje</a>"}
                        testausta += "<br>";
                    } else if (kampus == "Joensuu" && !document.getElementById('vc').checked){
                        testausta += kampus +"   " 
                        + tilat[kampus][tila].tunnus+"   " 
                        + tilat[kampus][tila].kapasiteetti + "   "
                        if (tilat[kampus][tila].ohje != undefined){testausta += "<a href=\"" + tilat[kampus][tila].ohje + "\">ohje</a>"}
                        testausta += "<br>";
                    }
                }

                if (document.getElementById('kampus2').checked
                && tilat[kampus][tila].kapasiteetti >= luku_min.value
                && tilat[kampus][tila].kapasiteetti <= luku_max.value)
                {
                    if (kampus == "Kuopio"&& document.getElementById('vc').checked == 
                    tilat[kampus][tila].videoneuvottelulaite){
                        testausta += kampus +"   " 
                        + tilat[kampus][tila].tunnus+"   " 
                        + tilat[kampus][tila].kapasiteetti + "  "
                        if (tilat[kampus][tila].ohje != undefined){testausta += "<a href=\"" + tilat[kampus][tila].ohje + "\">ohje</a>"}
                        testausta += "<br>";
                    } else if (kampus == "Kuopio" && !document.getElementById('vc').checked){
                        testausta += kampus +"   " 
                        + tilat[kampus][tila].tunnus+"   " 
                        + tilat[kampus][tila].kapasiteetti + "   "
                        if (tilat[kampus][tila].ohje != undefined){testausta += "<a href=\"" + tilat[kampus][tila].ohje + "\">ohje</a>"}
                        testausta += "<br>";
                    } 
                }

            }
        }
        

        document.getElementById("taulukko").innerHTML=testausta;
    }
    

</script>


<div id="taulukko"></div>


</body>

</html>